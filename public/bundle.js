var app=angular.module("Listor",["ui.router","satellizer","dndLists"]);app.config(["$stateProvider","$urlRouterProvider","$authProvider",function(e,t,n){function r(e,t){var n=e.defer();return t.isAuthenticated()?n.reject():n.resolve(),n.promise}function o(e,t,n){var r=e.defer();return n.isAuthenticated()?r.resolve():t.path("/login"),r.promise}r.$inject=["$q","$auth"],o.$inject=["$q","$location","$auth"],n.google({clientId:"925082493768-e6ftet5isbrrhtg2tra4v7lhr23v6619.apps.googleusercontent.com"}),e.state("home",{url:"/",templateUrl:"templates/main.html",controller:"MainCtrl"}).state("register",{url:"/register",templateUrl:"templates/register.html",controller:"AuthCtrl",resolve:{skipIfLoggedIn:r}}).state("login",{url:"/login",templateUrl:"templates/login.html",controller:"AuthCtrl"}).state("logout",{url:"/logout",template:null,controller:"LogoutCtrl"}).state("profile",{url:"/profile",templateUrl:"templates/profile.html",controller:"ProfileCtrl",resolve:{loginRequired:o}}),t.otherwise("/")}]),app.controller("AuthCtrl",["$scope","$auth","$location","Account",function(e,t,n,r){e.authenticate=function(e){t.authenticate(e).then(function(e){console.log(e.data.token),t.setToken(e)}),n.path("/")},e.newUser={},e.errorMessage=!1,e.register=function(){t.signup(e.newUser).then(function(e){t.setToken(e),r.setUser().then(function(e){n.path("/")})})["catch"](function(t){console.log(t),e.errorMessage=t.data.message})},e.loginUser={},e.login=function(){t.login(e.loginUser).then(function(){r.setUser().then(function(e){n.path("/")})})["catch"](function(t){console.log(t),e.errorMessage=t.data.message})}}]),app.controller("LogoutCtrl",["$location","$auth",function(e,t){t.isAuthenticated()&&t.logout().then(function(){e.path("/")})}]),app.controller("MainCtrl",["$rootScope","$scope","$q","Candidate",function(e,t,n,r){t.master={},t.c={},t.addCandidate=function(n){return n.owner=e.user._id,r.add(n).then(function(e){t.reset()})},t.reset=function(){t.c=angular.copy(t.master)},t.refreshCandidates=function(){n.all([r.needsApproval(),r.needsFeedback(),r.needsInterview(),r.finalStages()]).then(function(e){t.needsApproval=e[0].data,t.needsFeedback=e[1].data,t.needsInterview=e[2].data,t.finalStages=e[3].data})["catch"](function(e){console.error(e)})}}]),app.controller("NavCtrl",["$rootScope","$auth","Account",function(e,t,n){n.setUser(),e.isAuthenticated=function(){return t.isAuthenticated()}}]),app.controller("ProfileCtrl",["$scope","$auth","Account",function(e,t,n){e.updateProfile=function(){n.updateProfile(e.user).then(function(){console.log("Profile has been updated")})["catch"](function(e){console.error(e.data.message,e.status)})}}]),app.factory("Account",["$http","$rootScope",function(e,t){return{setUser:function(){return e.get("/api/me").then(function(e){t.user=e.data})},getProfile:function(){return e.get("/api/me")},updateProfile:function(t){return e.put("/api/me",t)}}}]),app.factory("Candidate",["$http","$rootScope",function(e,t){var n=function(n){var r=t.user;return e({method:"GET",url:n,params:{owner:r._id}})};return{add:function(t){return e.post("/api/candidates/add",t)},all:function(){return n("/api/candidates")},needsApproval:function(){return n("/api/candidates/needsApproval")},needsFeedback:function(){return n("/api/candidates/needsFeedback")},needsInterview:function(){return n("/api/candidates/needsInterview")},finalStages:function(){return n("/api/candidates/finalStages")}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInB1YmxpYy9idW5kbGUuanMiLCJjb250cm9sbGVycy9hdXRoLmpzIiwiY29udHJvbGxlcnMvbG9nb3V0LmpzIiwiY29udHJvbGxlcnMvbWFpbi5qcyIsImNvbnRyb2xsZXJzL25hdi5qcyIsImNvbnRyb2xsZXJzL3Byb2ZpbGUuanMiLCJmYWN0b3JpZXMvQWNjb3VudC5qcyIsImZhY3Rvcmllcy9DYW5kaWRhdGUuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGF1dGhQcm92aWRlciIsInNraXBJZkxvZ2dlZEluIiwiJHEiLCIkYXV0aCIsImRmZCIsImRlZmVyIiwiaXNBdXRoZW50aWNhdGVkIiwicmVqZWN0IiwicmVzb2x2ZSIsInByb21pc2UiLCJsb2dpblJlcXVpcmVkIiwiJGxvY2F0aW9uIiwiZGVmZXJyZWQiLCJwYXRoIiwiJGluamVjdCIsImdvb2dsZSIsImNsaWVudElkIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZSIsIm90aGVyd2lzZSIsIiRzY29wZSIsIkFjY291bnQiLCJhdXRoZW50aWNhdGUiLCJwcm92aWRlciIsInRoZW4iLCJyZXMiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsInRva2VuIiwic2V0VG9rZW4iLCJuZXdVc2VyIiwiZXJyb3JNZXNzYWdlIiwicmVnaXN0ZXIiLCJzaWdudXAiLCJzZXRVc2VyIiwicmVzcG9uc2UiLCJtZXNzYWdlIiwibG9naW5Vc2VyIiwibG9naW4iLCJsb2dvdXQiLCIkcm9vdFNjb3BlIiwiQ2FuZGlkYXRlIiwibWFzdGVyIiwiYyIsImFkZENhbmRpZGF0ZSIsImNhbmRpZGF0ZSIsIm93bmVyIiwidXNlciIsIl9pZCIsImFkZCIsInJlc2V0IiwiY29weSIsInJlZnJlc2hDYW5kaWRhdGVzIiwiYWxsIiwibmVlZHNBcHByb3ZhbCIsIm5lZWRzRmVlZGJhY2siLCJuZWVkc0ludGVydmlldyIsImZpbmFsU3RhZ2VzIiwiZXJyIiwiZXJyb3IiLCJ1cGRhdGVQcm9maWxlIiwic3RhdHVzIiwiZmFjdG9yeSIsIiRodHRwIiwiZ2V0IiwiZ2V0UHJvZmlsZSIsInByb2ZpbGVEYXRhIiwicHV0IiwicmVxdWVzdF9jYW5kaWRhdGVzIiwidXJsX2VuZHBvaW50IiwiY3VycmVudF91c2VyIiwibWV0aG9kIiwicGFyYW1zIiwicG9zdCJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxVQUNBLFlBQ0EsYUFDQSxZQUdBRixLQUFBRyxRQUFBLGlCQUFBLHFCQUFBLGdCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBMkNBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUYsRUFBQUcsT0FNQSxPQUxBRixHQUFBRyxrQkFDQUYsRUFBQUcsU0FFQUgsRUFBQUksVUFFQUosRUFBQUssUUFFQSxRQUFBQyxHQUFBUixFQUFBUyxFQUFBUixHQUNBLEdBQUFTLEdBQUFWLEVBQUFHLE9BTUEsT0FMQUYsR0FBQUcsa0JBQ0FNLEVBQUFKLFVBRUFHLEVBQUFFLEtBQUEsVUFFQUQsRUFBQUgsUUN6RElSLEVBQWVhLFNBQVcsS0FBTSxTQUNoQ0osRUFBY0ksU0FBVyxLQUFNLFlBQWEsU0REaERkLEVBQUFlLFFBQ0FDLFNBQUEsNkVBSUFsQixFQUNBbUIsTUFBQSxRQUNBQyxJQUFBLElBQ0FDLFlBQUEsc0JBQ0FDLFdBQUEsYUFFQUgsTUFBQSxZQUNBQyxJQUFBLFlBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsV0FDQVosU0FDQVAsZUFBQUEsS0FHQWdCLE1BQUEsU0FDQUMsSUFBQSxTQUNBQyxZQUFBLHVCQUNBQyxXQUFBLGFBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRyxTQUFBLEtBQ0FELFdBQUEsZUFFQUgsTUFBQSxXQUNBQyxJQUFBLFdBQ0FDLFlBQUEseUJBQ0FDLFdBQUEsY0FDQVosU0FDQUUsY0FBQUEsS0FJQVgsRUFBQXVCLFVBQUEs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QUFBdkIsR0FFQSxHQUFBNEIsR0FBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUE5QixFQUFBTyxJQUNBLE9BQUFnQixJQUNBUSxPQUFBLE1BQ0F6RCxJQUFBdUQsRUFDQUcsUUFBQTFCLE1BQUF3QixFQUFBdEIsT0FJQSxRQUNBQyxJQUFBLFNBQUFKLEdBQ0EsTUFBQWtCLEdBQUFVLEtBQUEsc0JBQUE1QixJQUdBUSxJQUFBLFdBQ0EsTUFBQWUsR0FBQSxvQkFFQWQsY0FBQSxXQUNBLE1BQUFjLEdBQUEsa0NBRUFiLGNBQUEsV0FDQSxNQUFBYSxHQUFBLGtDQUVBWixlQUFBLFdBQ0EsTUFBQVksR0FBQSxtQ0FFQVgsWUFBQSxXQUNBLE1BQUFXLEdBQUEiLCJmaWxlIjoicHVibGljL2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdMaXN0b3InLCBbXG5cdCd1aS5yb3V0ZXInLFxuXHQnc2F0ZWxsaXplcicsXG5cdCdkbmRMaXN0cydcbl0pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRhdXRoUHJvdmlkZXIpe1xuXHQvLyBzYXRlbGxpemVyIGNvbmZpZ1xuXHQkYXV0aFByb3ZpZGVyLmdvb2dsZSh7XG4gICAgICBjbGllbnRJZDogJzkyNTA4MjQ5Mzc2OC1lNmZ0ZXQ1aXNicnJodGcydHJhNHY3bGhyMjN2NjYxOS5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSdcbiAgICB9KTtcblxuICAgIC8vIGRlZmluZSByb3V0ZXNcblx0JHN0YXRlUHJvdmlkZXJcblx0XHQuc3RhdGUoJ2hvbWUnLCB7XG5cdFx0XHR1cmw6IFwiL1wiLFxuXHRcdFx0dGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzL21haW4uaHRtbFwiLFxuXHRcdFx0Y29udHJvbGxlcjogJ01haW5DdHJsJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdyZWdpc3RlcicsIHtcblx0XHRcdHVybDogXCIvcmVnaXN0ZXJcIixcblx0XHRcdHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9yZWdpc3Rlci5odG1sXCIsXG5cdFx0XHRjb250cm9sbGVyOiAnQXV0aEN0cmwnLFxuXHRcdFx0cmVzb2x2ZToge1xuXHQgICAgICAgICAgc2tpcElmTG9nZ2VkSW46IHNraXBJZkxvZ2dlZEluXG5cdCAgICAgICAgfVxuXHRcdH0pXG5cdFx0LnN0YXRlKCdsb2dpbicsIHtcblx0XHRcdHVybDogXCIvbG9naW5cIixcblx0XHRcdHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9sb2dpbi5odG1sXCIsXG5cdFx0XHRjb250cm9sbGVyOiAnQXV0aEN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ2xvZ291dCcsIHtcblx0XHRcdHVybDogJy9sb2dvdXQnLFxuXHRcdFx0dGVtcGxhdGU6IG51bGwsXG5cdFx0XHRjb250cm9sbGVyOiAnTG9nb3V0Q3RybCdcblx0XHR9KVxuXHRcdC5zdGF0ZSgncHJvZmlsZScsIHtcblx0XHRcdHVybDogJy9wcm9maWxlJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Byb2ZpbGUuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnUHJvZmlsZUN0cmwnLFxuXHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRsb2dpblJlcXVpcmVkOiBsb2dpblJlcXVpcmVkXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XG5cblx0Ly8gUmVzb2x2ZSBmdW5jdGlvbnNcblx0ZnVuY3Rpb24gc2tpcElmTG9nZ2VkSW4oJHEsICRhdXRoKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIGlmICgkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBkZmQucmVqZWN0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZmQucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsb2dpblJlcXVpcmVkKCRxLCAkbG9jYXRpb24sICRhdXRoKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgaWYgKCRhdXRoLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbn0pOyIsIlxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdMaXN0b3InLCBbXG5cdCd1aS5yb3V0ZXInLFxuXHQnc2F0ZWxsaXplcicsXG5cdCdkbmRMaXN0cydcbl0pO1xuXG5hcHAuY29uZmlnKFtcIiRzdGF0ZVByb3ZpZGVyXCIsIFwiJHVybFJvdXRlclByb3ZpZGVyXCIsIFwiJGF1dGhQcm92aWRlclwiLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkYXV0aFByb3ZpZGVyKXtcblx0Ly8gc2F0ZWxsaXplciBjb25maWdcbiAgICBza2lwSWZMb2dnZWRJbi4kaW5qZWN0ID0gW1wiJHFcIiwgXCIkYXV0aFwiXTtcbiAgICBsb2dpblJlcXVpcmVkLiRpbmplY3QgPSBbXCIkcVwiLCBcIiRsb2NhdGlvblwiLCBcIiRhdXRoXCJdO1xuXHQkYXV0aFByb3ZpZGVyLmdvb2dsZSh7XG4gICAgICBjbGllbnRJZDogJzkyNTA4MjQ5Mzc2OC1lNmZ0ZXQ1aXNicnJodGcydHJhNHY3bGhyMjN2NjYxOS5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSdcbiAgICB9KTtcblxuICAgIC8vIGRlZmluZSByb3V0ZXNcblx0JHN0YXRlUHJvdmlkZXJcblx0XHQuc3RhdGUoJ2hvbWUnLCB7XG5cdFx0XHR1cmw6IFwiL1wiLFxuXHRcdFx0dGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzL21haW4uaHRtbFwiLFxuXHRcdFx0Y29udHJvbGxlcjogJ01haW5DdHJsJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdyZWdpc3RlcicsIHtcblx0XHRcdHVybDogXCIvcmVnaXN0ZXJcIixcblx0XHRcdHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9yZWdpc3Rlci5odG1sXCIsXG5cdFx0XHRjb250cm9sbGVyOiAnQXV0aEN0cmwnLFxuXHRcdFx0cmVzb2x2ZToge1xuXHQgICAgICAgICAgc2tpcElmTG9nZ2VkSW46IHNraXBJZkxvZ2dlZEluXG5cdCAgICAgICAgfVxuXHRcdH0pXG5cdFx0LnN0YXRlKCdsb2dpbicsIHtcblx0XHRcdHVybDogXCIvbG9naW5cIixcblx0XHRcdHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9sb2dpbi5odG1sXCIsXG5cdFx0XHRjb250cm9sbGVyOiAnQXV0aEN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ2xvZ291dCcsIHtcblx0XHRcdHVybDogJy9sb2dvdXQnLFxuXHRcdFx0dGVtcGxhdGU6IG51bGwsXG5cdFx0XHRjb250cm9sbGVyOiAnTG9nb3V0Q3RybCdcblx0XHR9KVxuXHRcdC5zdGF0ZSgncHJvZmlsZScsIHtcblx0XHRcdHVybDogJy9wcm9maWxlJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Byb2ZpbGUuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnUHJvZmlsZUN0cmwnLFxuXHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRsb2dpblJlcXVpcmVkOiBsb2dpblJlcXVpcmVkXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XG5cblx0Ly8gUmVzb2x2ZSBmdW5jdGlvbnNcblx0ZnVuY3Rpb24gc2tpcElmTG9nZ2VkSW4oJHEsICRhdXRoKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIGlmICgkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBkZmQucmVqZWN0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZmQucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsb2dpblJlcXVpcmVkKCRxLCAkbG9jYXRpb24sICRhdXRoKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgaWYgKCRhdXRoLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ0F1dGhDdHJsJywgW1wiJHNjb3BlXCIsIFwiJGF1dGhcIiwgXCIkbG9jYXRpb25cIiwgXCJBY2NvdW50XCIsIGZ1bmN0aW9uKCRzY29wZSwgJGF1dGgsICRsb2NhdGlvbiwgQWNjb3VudCl7XG5cblx0Ly8gRm9yIEdvb2dsZSBsb2dpblxuXHQkc2NvcGUuYXV0aGVudGljYXRlID0gZnVuY3Rpb24ocHJvdmlkZXIpIHtcbiAgICAgICRhdXRoLmF1dGhlbnRpY2F0ZShwcm92aWRlcikudGhlbihmdW5jdGlvbihyZXMpe1xuICAgICAgXHRjb25zb2xlLmxvZyhyZXMuZGF0YS50b2tlbik7XG4gICAgICBcdCRhdXRoLnNldFRva2VuKHJlcyk7XG4gICAgICB9KTtcbiAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgfTtcblxuXHQvLyByZWdpc3RlciBuZXcgdXNlclxuXHQkc2NvcGUubmV3VXNlciA9IHt9O1xuXHQkc2NvcGUuZXJyb3JNZXNzYWdlID0gZmFsc2U7XG5cdCRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uKCl7XG5cdFx0Ly8gc2VuZCBzaWdudXAgUE9TVCByZXF1ZXN0IHRvIC9hdXRoL3NpZ251cFxuXHRcdCRhdXRoLnNpZ251cCgkc2NvcGUubmV3VXNlcilcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRcdC8vIHNldCBsb2NhbHN0b3JhZ2UgdG9rZW5cblx0XHRcdFx0JGF1dGguc2V0VG9rZW4ocmVzKTtcblx0XHRcdFx0QWNjb3VudC5zZXRVc2VyKClcblx0XHRcdCAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdCAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuXHRcdFx0ICAgICAgICB9KTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzKTtcblx0XHRcdFx0JHNjb3BlLmVycm9yTWVzc2FnZSA9IHJlcy5kYXRhLm1lc3NhZ2U7XG5cdFx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUubG9naW5Vc2VyID0ge307XG5cdCRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgJGF1dGgubG9naW4oJHNjb3BlLmxvZ2luVXNlcilcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0QWNjb3VudC5zZXRVc2VyKClcblx0XHQgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdFx0ICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBcdGNvbnNvbGUubG9nKHJlcyk7XG5cdFx0XHQkc2NvcGUuZXJyb3JNZXNzYWdlID0gcmVzLmRhdGEubWVzc2FnZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcbmFwcC5jb250cm9sbGVyKCdMb2dvdXRDdHJsJywgW1wiJGxvY2F0aW9uXCIsIFwiJGF1dGhcIiwgZnVuY3Rpb24oJGxvY2F0aW9uLCAkYXV0aCkge1xuXHRpZiAoISRhdXRoLmlzQXV0aGVudGljYXRlZCgpKSB7IHJldHVybjsgfVxuXG5cdCRhdXRoLmxvZ291dCgpXG5cdCAgLnRoZW4oZnVuY3Rpb24oKSB7XG5cdCAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuXHQgIH0pO1xufV0pO1xuXG5hcHAuY29udHJvbGxlcignTWFpbkN0cmwnLCBbXCIkcm9vdFNjb3BlXCIsIFwiJHNjb3BlXCIsIFwiJHFcIiwgXCJDYW5kaWRhdGVcIiwgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkcSwgQ2FuZGlkYXRlKXtcblx0JHNjb3BlLm1hc3RlciA9IHt9O1xuXHQkc2NvcGUuYyA9IHt9O1xuXG5cdCRzY29wZS5hZGRDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpe1xuXHRcdGNhbmRpZGF0ZS5vd25lciA9ICRyb290U2NvcGUudXNlci5faWQ7XG5cdFx0cmV0dXJuIENhbmRpZGF0ZS5hZGQoY2FuZGlkYXRlKS50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHQkc2NvcGUucmVzZXQoKTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHtcblx0XHQkc2NvcGUuYyA9IGFuZ3VsYXIuY29weSgkc2NvcGUubWFzdGVyKVxuXHR9O1xuXG5cdCRzY29wZS5yZWZyZXNoQ2FuZGlkYXRlcyA9IGZ1bmN0aW9uKCl7XG5cdFx0JHEuYWxsKFtcblx0XHRcdENhbmRpZGF0ZS5uZWVkc0FwcHJvdmFsKCksXG5cdFx0XHRDYW5kaWRhdGUubmVlZHNGZWVkYmFjaygpLFxuXHRcdFx0Q2FuZGlkYXRlLm5lZWRzSW50ZXJ2aWV3KCksXG5cdFx0XHRDYW5kaWRhdGUuZmluYWxTdGFnZXMoKVxuXHRcdF0pLnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdCRzY29wZS5uZWVkc0FwcHJvdmFsID0gcmVzWzBdLmRhdGE7XG5cdFx0XHQkc2NvcGUubmVlZHNGZWVkYmFjayA9IHJlc1sxXS5kYXRhO1xuXHRcdFx0JHNjb3BlLm5lZWRzSW50ZXJ2aWV3ID0gcmVzWzJdLmRhdGE7XG5cdFx0XHQkc2NvcGUuZmluYWxTdGFnZXMgPSByZXNbM10uZGF0YTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdH0pO1xuXHR9O1xufV0pO1xuXG5hcHAuY29udHJvbGxlcignTmF2Q3RybCcsIFtcIiRyb290U2NvcGVcIiwgXCIkYXV0aFwiLCBcIkFjY291bnRcIiwgZnVuY3Rpb24oJHJvb3RTY29wZSwgJGF1dGgsIEFjY291bnQpe1xuXHRBY2NvdW50LnNldFVzZXIoKTtcblx0XG5cdCRyb290U2NvcGUuaXNBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJGF1dGguaXNBdXRoZW50aWNhdGVkKCk7XG4gICAgfTtcbn1dKVxuXG5hcHAuY29udHJvbGxlcignUHJvZmlsZUN0cmwnLCBbXCIkc2NvcGVcIiwgXCIkYXV0aFwiLCBcIkFjY291bnRcIiwgZnVuY3Rpb24oJHNjb3BlLCAkYXV0aCwgQWNjb3VudCkge1xuXG4gICAgJHNjb3BlLnVwZGF0ZVByb2ZpbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIEFjY291bnQudXBkYXRlUHJvZmlsZSgkc2NvcGUudXNlcilcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1Byb2ZpbGUgaGFzIGJlZW4gdXBkYXRlZCcpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHJlc3BvbnNlLmRhdGEubWVzc2FnZSwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcbmFwcC5mYWN0b3J5KCdBY2NvdW50JywgW1wiJGh0dHBcIiwgXCIkcm9vdFNjb3BlXCIsIGZ1bmN0aW9uKCRodHRwLCAkcm9vdFNjb3BlKSB7XG5cdHJldHVybiB7XG5cdFx0c2V0VXNlcjogZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbWUnKVxuXHRcdCAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHQgICAgICAgIFx0JHJvb3RTY29wZS51c2VyID0gcmVzcG9uc2UuZGF0YTtcblx0XHQgICAgICAgIH0pO1xuXHRcdH0sXG5cdFx0Z2V0UHJvZmlsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lJyk7XG5cdFx0fSxcblx0XHR1cGRhdGVQcm9maWxlOiBmdW5jdGlvbihwcm9maWxlRGF0YSkge1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZScsIHByb2ZpbGVEYXRhKTtcblx0XHR9XG5cdH07XG59XSk7XG5hcHAuZmFjdG9yeSgnQ2FuZGlkYXRlJywgW1wiJGh0dHBcIiwgXCIkcm9vdFNjb3BlXCIsIGZ1bmN0aW9uKCRodHRwLCAkcm9vdFNjb3BlKSB7XG5cblx0dmFyIHJlcXVlc3RfY2FuZGlkYXRlcyA9IGZ1bmN0aW9uKHVybF9lbmRwb2ludCl7XG5cdFx0dmFyIGN1cnJlbnRfdXNlciA9ICRyb290U2NvcGUudXNlcjtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdHVybDogdXJsX2VuZHBvaW50LFxuXHRcdFx0cGFyYW1zOiB7IG93bmVyOiBjdXJyZW50X3VzZXIuX2lkIH1cblx0XHR9KTtcblx0fTtcblxuXHRyZXR1cm4ge1xuXHRcdGFkZDogZnVuY3Rpb24oY2FuZGlkYXRlKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NhbmRpZGF0ZXMvYWRkJywgY2FuZGlkYXRlKTtcblx0XHR9LFxuXHRcdC8vIGdldCBhbGwgY3VycmVudCB1c2VyJ3MgY2FuZGlkYXRlc1xuXHRcdGFsbDogZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiByZXF1ZXN0X2NhbmRpZGF0ZXMoJy9hcGkvY2FuZGlkYXRlcycpO1xuXHRcdH0sXG5cdFx0bmVlZHNBcHByb3ZhbDogZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiByZXF1ZXN0X2NhbmRpZGF0ZXMoJy9hcGkvY2FuZGlkYXRlcy9uZWVkc0FwcHJvdmFsJyk7XG5cdFx0fSxcblx0XHRuZWVkc0ZlZWRiYWNrOiBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuIHJlcXVlc3RfY2FuZGlkYXRlcygnL2FwaS9jYW5kaWRhdGVzL25lZWRzRmVlZGJhY2snKTtcblx0XHR9LFxuXHRcdG5lZWRzSW50ZXJ2aWV3OiBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuIHJlcXVlc3RfY2FuZGlkYXRlcygnL2FwaS9jYW5kaWRhdGVzL25lZWRzSW50ZXJ2aWV3Jyk7XG5cdFx0fSxcblx0XHRmaW5hbFN0YWdlczogZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiByZXF1ZXN0X2NhbmRpZGF0ZXMoJy9hcGkvY2FuZGlkYXRlcy9maW5hbFN0YWdlcycpO1xuXHRcdH1cblx0fTtcbn1dKTtcbiIsIlxuYXBwLmNvbnRyb2xsZXIoJ0F1dGhDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkYXV0aCwgJGxvY2F0aW9uLCBBY2NvdW50KXtcblxuXHQvLyBGb3IgR29vZ2xlIGxvZ2luXG5cdCRzY29wZS5hdXRoZW50aWNhdGUgPSBmdW5jdGlvbihwcm92aWRlcikge1xuICAgICAgJGF1dGguYXV0aGVudGljYXRlKHByb3ZpZGVyKS50aGVuKGZ1bmN0aW9uKHJlcyl7XG4gICAgICBcdGNvbnNvbGUubG9nKHJlcy5kYXRhLnRva2VuKTtcbiAgICAgIFx0JGF1dGguc2V0VG9rZW4ocmVzKTtcbiAgICAgIH0pO1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICB9O1xuXG5cdC8vIHJlZ2lzdGVyIG5ldyB1c2VyXG5cdCRzY29wZS5uZXdVc2VyID0ge307XG5cdCRzY29wZS5lcnJvck1lc3NhZ2UgPSBmYWxzZTtcblx0JHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24oKXtcblx0XHQvLyBzZW5kIHNpZ251cCBQT1NUIHJlcXVlc3QgdG8gL2F1dGgvc2lnbnVwXG5cdFx0JGF1dGguc2lnbnVwKCRzY29wZS5uZXdVc2VyKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0Ly8gc2V0IGxvY2Fsc3RvcmFnZSB0b2tlblxuXHRcdFx0XHQkYXV0aC5zZXRUb2tlbihyZXMpO1xuXHRcdFx0XHRBY2NvdW50LnNldFVzZXIoKVxuXHRcdFx0ICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0ICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdFx0XHQgICAgICAgIH0pO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihyZXMpe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXMpO1xuXHRcdFx0XHQkc2NvcGUuZXJyb3JNZXNzYWdlID0gcmVzLmRhdGEubWVzc2FnZTtcblx0XHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5sb2dpblVzZXIgPSB7fTtcblx0JHNjb3BlLmxvZ2luID0gZnVuY3Rpb24oKSB7XG4gICAgICAkYXV0aC5sb2dpbigkc2NvcGUubG9naW5Vc2VyKVxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgXHRBY2NvdW50LnNldFVzZXIoKVxuXHRcdCAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0XHQgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIFx0Y29uc29sZS5sb2cocmVzKTtcblx0XHRcdCRzY29wZS5lcnJvck1lc3NhZ2UgPSByZXMuZGF0YS5tZXNzYWdlO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7IiwiYXBwLmNvbnRyb2xsZXIoJ0xvZ291dEN0cmwnLCBmdW5jdGlvbigkbG9jYXRpb24sICRhdXRoKSB7XG5cdGlmICghJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHsgcmV0dXJuOyB9XG5cblx0JGF1dGgubG9nb3V0KClcblx0ICAudGhlbihmdW5jdGlvbigpIHtcblx0ICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdCAgfSk7XG59KTsiLCJcbmFwcC5jb250cm9sbGVyKCdNYWluQ3RybCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHEsIENhbmRpZGF0ZSl7XG5cdCRzY29wZS5tYXN0ZXIgPSB7fTtcblx0JHNjb3BlLmMgPSB7fTtcblxuXHQkc2NvcGUuYWRkQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKXtcblx0XHRjYW5kaWRhdGUub3duZXIgPSAkcm9vdFNjb3BlLnVzZXIuX2lkO1xuXHRcdHJldHVybiBDYW5kaWRhdGUuYWRkKGNhbmRpZGF0ZSkudGhlbihmdW5jdGlvbihyZXMpe1xuXHRcdFx0JHNjb3BlLnJlc2V0KCk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JHNjb3BlLmMgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hc3Rlcilcblx0fTtcblxuXHQkc2NvcGUucmVmcmVzaENhbmRpZGF0ZXMgPSBmdW5jdGlvbigpe1xuXHRcdCRxLmFsbChbXG5cdFx0XHRDYW5kaWRhdGUubmVlZHNBcHByb3ZhbCgpLFxuXHRcdFx0Q2FuZGlkYXRlLm5lZWRzRmVlZGJhY2soKSxcblx0XHRcdENhbmRpZGF0ZS5uZWVkc0ludGVydmlldygpLFxuXHRcdFx0Q2FuZGlkYXRlLmZpbmFsU3RhZ2VzKClcblx0XHRdKS50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHQkc2NvcGUubmVlZHNBcHByb3ZhbCA9IHJlc1swXS5kYXRhO1xuXHRcdFx0JHNjb3BlLm5lZWRzRmVlZGJhY2sgPSByZXNbMV0uZGF0YTtcblx0XHRcdCRzY29wZS5uZWVkc0ludGVydmlldyA9IHJlc1syXS5kYXRhO1xuXHRcdFx0JHNjb3BlLmZpbmFsU3RhZ2VzID0gcmVzWzNdLmRhdGE7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0XHR9KTtcblx0fTtcbn0pOyIsIlxuYXBwLmNvbnRyb2xsZXIoJ05hdkN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkYXV0aCwgQWNjb3VudCl7XG5cdEFjY291bnQuc2V0VXNlcigpO1xuXHRcblx0JHJvb3RTY29wZS5pc0F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKTtcbiAgICB9O1xufSkiLCJcbmFwcC5jb250cm9sbGVyKCdQcm9maWxlQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGF1dGgsIEFjY291bnQpIHtcblxuICAgICRzY29wZS51cGRhdGVQcm9maWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICBBY2NvdW50LnVwZGF0ZVByb2ZpbGUoJHNjb3BlLnVzZXIpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdQcm9maWxlIGhhcyBiZWVuIHVwZGF0ZWQnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihyZXNwb25zZS5kYXRhLm1lc3NhZ2UsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgIH0pO1xuICAgIH07XG59KTsiLCJhcHAuZmFjdG9yeSgnQWNjb3VudCcsIGZ1bmN0aW9uKCRodHRwLCAkcm9vdFNjb3BlKSB7XG5cdHJldHVybiB7XG5cdFx0c2V0VXNlcjogZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbWUnKVxuXHRcdCAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHQgICAgICAgIFx0JHJvb3RTY29wZS51c2VyID0gcmVzcG9uc2UuZGF0YTtcblx0XHQgICAgICAgIH0pO1xuXHRcdH0sXG5cdFx0Z2V0UHJvZmlsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lJyk7XG5cdFx0fSxcblx0XHR1cGRhdGVQcm9maWxlOiBmdW5jdGlvbihwcm9maWxlRGF0YSkge1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZScsIHByb2ZpbGVEYXRhKTtcblx0XHR9XG5cdH07XG59KTsiLCJhcHAuZmFjdG9yeSgnQ2FuZGlkYXRlJywgZnVuY3Rpb24oJGh0dHAsICRyb290U2NvcGUpIHtcblxuXHR2YXIgcmVxdWVzdF9jYW5kaWRhdGVzID0gZnVuY3Rpb24odXJsX2VuZHBvaW50KXtcblx0XHR2YXIgY3VycmVudF91c2VyID0gJHJvb3RTY29wZS51c2VyO1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0dXJsOiB1cmxfZW5kcG9pbnQsXG5cdFx0XHRwYXJhbXM6IHsgb3duZXI6IGN1cnJlbnRfdXNlci5faWQgfVxuXHRcdH0pO1xuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0YWRkOiBmdW5jdGlvbihjYW5kaWRhdGUpe1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2FuZGlkYXRlcy9hZGQnLCBjYW5kaWRhdGUpO1xuXHRcdH0sXG5cdFx0Ly8gZ2V0IGFsbCBjdXJyZW50IHVzZXIncyBjYW5kaWRhdGVzXG5cdFx0YWxsOiBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuIHJlcXVlc3RfY2FuZGlkYXRlcygnL2FwaS9jYW5kaWRhdGVzJyk7XG5cdFx0fSxcblx0XHRuZWVkc0FwcHJvdmFsOiBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuIHJlcXVlc3RfY2FuZGlkYXRlcygnL2FwaS9jYW5kaWRhdGVzL25lZWRzQXBwcm92YWwnKTtcblx0XHR9LFxuXHRcdG5lZWRzRmVlZGJhY2s6IGZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gcmVxdWVzdF9jYW5kaWRhdGVzKCcvYXBpL2NhbmRpZGF0ZXMvbmVlZHNGZWVkYmFjaycpO1xuXHRcdH0sXG5cdFx0bmVlZHNJbnRlcnZpZXc6IGZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gcmVxdWVzdF9jYW5kaWRhdGVzKCcvYXBpL2NhbmRpZGF0ZXMvbmVlZHNJbnRlcnZpZXcnKTtcblx0XHR9LFxuXHRcdGZpbmFsU3RhZ2VzOiBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuIHJlcXVlc3RfY2FuZGlkYXRlcygnL2FwaS9jYW5kaWRhdGVzL2ZpbmFsU3RhZ2VzJyk7XG5cdFx0fVxuXHR9O1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
