var app=angular.module("Listor",["ui.router","satellizer"]);app.config(["$stateProvider","$urlRouterProvider","$authProvider",function(t,e,o){function n(t,e){var o=t.defer();return e.isAuthenticated()?o.reject():o.resolve(),o.promise}function r(t,e,o){var n=t.defer();return o.isAuthenticated()?n.resolve():e.path("/login"),n.promise}n.$inject=["$q","$auth"],r.$inject=["$q","$location","$auth"],o.google({clientId:"925082493768-e6ftet5isbrrhtg2tra4v7lhr23v6619.apps.googleusercontent.com"}),t.state("home",{url:"/",templateUrl:"templates/main.html",controller:"MainCtrl"}).state("register",{url:"/register",templateUrl:"templates/register.html",controller:"AuthCtrl",resolve:{skipIfLoggedIn:n}}).state("login",{url:"/login",templateUrl:"templates/login.html",controller:"AuthCtrl"}).state("logout",{url:"/logout",template:null,controller:"LogoutCtrl"}).state("profile",{url:"/profile",templateUrl:"templates/profile.html",controller:"ProfileCtrl",resolve:{loginRequired:r}}),e.otherwise("/")}]),app.controller("AuthCtrl",["$scope","$auth","$location","Account",function(t,e,o,n){t.authenticate=function(t){e.authenticate(t).then(function(t){console.log(t.data.token),e.setToken(t)}),o.path("/")},t.newUser={},t.errorMessage=!1,t.register=function(){e.signup(t.newUser).then(function(t){e.setToken(t),n.setUser().then(function(t){o.path("/")})})["catch"](function(e){console.log(e),t.errorMessage=e.data.message})},t.loginUser={},t.login=function(){e.login(t.loginUser).then(function(){n.setUser().then(function(t){o.path("/")})})["catch"](function(e){console.log(e),t.errorMessage=e.data.message})}}]),app.controller("LogoutCtrl",["$location","$auth",function(t,e){e.isAuthenticated()&&e.logout().then(function(){t.path("/")})}]),app.controller("MainCtrl",["$scope","Candidate",function(t,e){t.addCandidate=function(o){return console.log(o),e.add(o).then(function(e){console.log(e),t.reset()})},t.reset=function(){t.c=angular.copy(t.master)}}]),app.controller("NavCtrl",["$scope","$auth","Account",function(t,e,o){o.setUser(),t.isAuthenticated=function(){return e.isAuthenticated()}}]),app.controller("ProfileCtrl",["$scope","$auth","Account",function(t,e,o){t.updateProfile=function(){o.updateProfile(t.user).then(function(){console.log("Profile has been updated")})["catch"](function(t){console.error(t.data.message,t.status)})}}]),app.factory("Account",["$http","$rootScope",function(t,e){return{setUser:function(){return t.get("/api/me").then(function(t){e.user=t.data,console.log("data: ",t.data)})},getProfile:function(){return t.get("/api/me")},updateProfile:function(e){return t.put("/api/me",e)}}}]),app.factory("Candidate",["$http",function(t){return{add:function(e){return t.post("/api/candidates/add",e)},all:function(){return t.get("/api/candidates")}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInB1YmxpYy9idW5kbGUuanMiLCJjb250cm9sbGVycy9hdXRoLmpzIiwiY29udHJvbGxlcnMvbG9nb3V0LmpzIiwiY29udHJvbGxlcnMvbWFpbi5qcyIsImNvbnRyb2xsZXJzL25hdi5qcyIsImNvbnRyb2xsZXJzL3Byb2ZpbGUuanMiLCJmYWN0b3JpZXMvQWNjb3VudC5qcyIsImZhY3Rvcmllcy9DYW5kaWRhdGUuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGF1dGhQcm92aWRlciIsInNraXBJZkxvZ2dlZEluIiwiJHEiLCIkYXV0aCIsImRmZCIsImRlZmVyIiwiaXNBdXRoZW50aWNhdGVkIiwicmVqZWN0IiwicmVzb2x2ZSIsInByb21pc2UiLCJsb2dpblJlcXVpcmVkIiwiJGxvY2F0aW9uIiwiZGVmZXJyZWQiLCJwYXRoIiwiJGluamVjdCIsImdvb2dsZSIsImNsaWVudElkIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZSIsIm90aGVyd2lzZSIsIiRzY29wZSIsIkFjY291bnQiLCJhdXRoZW50aWNhdGUiLCJwcm92aWRlciIsInRoZW4iLCJyZXMiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsInRva2VuIiwic2V0VG9rZW4iLCJuZXdVc2VyIiwiZXJyb3JNZXNzYWdlIiwicmVnaXN0ZXIiLCJzaWdudXAiLCJzZXRVc2VyIiwicmVzcG9uc2UiLCJtZXNzYWdlIiwibG9naW5Vc2VyIiwibG9naW4iLCJsb2dvdXQiLCJDYW5kaWRhdGUiLCJhZGRDYW5kaWRhdGUiLCJjYW5kaWRhdGUiLCJhZGQiLCJyZXNldCIsImMiLCJjb3B5IiwibWFzdGVyIiwidXBkYXRlUHJvZmlsZSIsInVzZXIiLCJlcnJvciIsInN0YXR1cyIsImZhY3RvcnkiLCIkaHR0cCIsIiRyb290U2NvcGUiLCJnZXQiLCJnZXRQcm9maWxlIiwicHJvZmlsZURhdGEiLCJwdXQiLCJwb3N0IiwiYWxsIl0sIm1hcHBpbmdzIjoiQUFDQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLFVBQ0EsWUFDQSxjQUdBRixLQUFBRyxRQUFBLGlCQUFBLHFCQUFBLGdCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBMkNBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUYsRUFBQUcsT0FNQSxPQUxBRixHQUFBRyxrQkFDQUYsRUFBQUcsU0FFQUgsRUFBQUksVUFFQUosRUFBQUssUUFFQSxRQUFBQyxHQUFBUixFQUFBUyxFQUFBUixHQUNBLEdBQUFTLEdBQUFWLEVBQUFHLE9BTUEsT0FMQUYsR0FBQUcsa0JBQ0FNLEVBQUFKLFVBRUFHLEVBQUFFLEtBQUEsVUFFQUQsRUFBQUgsUUN6RElSLEVBQWVhLFNBQVcsS0FBTSxTQUNoQ0osRUFBY0ksU0FBVyxLQUFNLFlBQWEsU0REaERkLEVBQUFlLFFBQ0FDLFNBQUEsNkVBSUFsQixFQUNBbUIsTUFBQSxRQUNBQyxJQUFBLElBQ0FDLFlBQUEsc0JBQ0FDLFdBQUEsYUFFQUgsTUFBQSxZQUNBQyxJQUFBLFlBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsV0FDQVosU0FDQVAsZUFBQUEsS0FHQWdCLE1BQUEsU0FDQUMsSUFBQSxTQUNBQyxZQUFBLHVCQUNBQyxXQUFBLGFBRUFILE1BQUEsVUFDQUMsSUFBQSxVQUNBRyxTQUFBLEtBQ0FELFdBQUEsZUFFQUgsTUFBQSxXQUNBQyxJQUFBLFdBQ0FDLFlBQUEseUJBQ0FDLFdBQUEsY0FDQVosU0FDQUUsY0FBQUEsS0FJQVgsRUFBQXVCLFVBQUEsUUU3Q0E1QixJQUFBMEIsV0FBQSxZQUFBLFNBQUEsUUFBQSxZQUFBLFVBQUEsU0FBQUcsRUFBQXBCLEVBQUFRLEVBQUFhLEdBR0FELEVBQUFFLGFBQUEsU0FBQUMsR0FDQXZCLEVBQUFzQixhQUFBQyxHQUFBQyxLQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUFGLEVBQUFHLEtBQUFDLE9BQ0E3QixFQUFBOEIsU0FBQUwsS0FFQWpCLEVBQUFFLEtBQUEsTUFJQVUsRUFBQVcsV0FDQVgsRUFBQVksY0FBQSxFQUNBWixFQUFBYSxTQUFBLFdBRUFqQyxFQUFBa0MsT0FBQWQsRUFBQVcsU0FDQVAsS0FBQSxTQUFBQyxHQUVBekIsRUFBQThCLFNBQUFMLEdBQ0FKLEVBQUFjLFVBQ0FYLEtBQUEsU0FBQVksR0FDQTVCLEVBQUFFLEtBQUEsU0FOQVYsU0FTQSxTQUFBeUIsR0FDQUMsUUFBQUMsSUFBQUYsR0FDQUwsRUFBQVksYUFBQVAsRUFBQUcsS0FBQVMsV0FJQWpCLEVBQUFrQixhQUNBbEIsRUFBQW1CLE1BQUEsV0FDQXZDLEVBQUF1QyxNQUFBbkIsRUFBQWtCLFdBQ0FkLEtBQUEsV0FDQUgsRUFBQWMsVUFDQVgsS0FBQSxTQUFBWSxHQUNBNUIsRUFBQUUsS0FBQSxTQUpBVixTQU9BLFNBQUF5QixHQUNBQyxRQUFBQyxJQUFBRixHQUNBTCxFQUFBWSxhQUFBUCxFQUFBRyxLQUFBUyxjQzNDQTlDLElBQUEwQixXQUFBLGNBQUEsWUFBQSxRQUFBLFNBQUFULEVBQUFSLEdBQ0FBLEVBQUFHLG1CQUVBSCxFQUFBd0MsU0FDQWhCLEtBQUEsV0FDQWhCLEVBQUFFLEtBQUEsVUNKQW5CLElBQUEwQixXQUFBLFlBQUEsU0FBQSxZQUFBLFNBQUFHLEVBQUFxQixHQUNBckIsRUFBQXNCLGFBQUEsU0FBQUMsR0FFQSxNQURBakIsU0FBQUMsSUFBQWdCLEdBQ0FGLEVBQUFHLElBQUFELEdBQUFuQixLQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUFGLEdBQ0FMLEVBQUF5QixXQUlBekIsRUFBQXlCLE1BQUEsV0FDQXpCLEVBQUEwQixFQUFBdEQsUUFBQXVELEtBQUEzQixFQUFBNEIsWUNWQXpELElBQUEwQixXQUFBLFdBQUEsU0FBQSxRQUFBLFVBQUEsU0FBQUcsRUFBQXBCLEVBQUFxQixHQUNBQSxFQUFBYyxVQUVBZixFQUFBakIsZ0JBQUEsV0FDQSxNQUFBSCxHQUFBRyxzQkNKQVosSUFBQTBCLFdBQUEsZUFBQSxTQUFBLFFBQUEsVUFBQSxTQUFBRyxFQUFBcEIsRUFBQXFCLEdBRUFELEVBQUE2QixjQUFBLFdBQ0E1QixFQUFBNEIsY0FBQTdCLEVBQUE4QixNQUNBMUIsS0FBQSxXQUNBRSxRQUFBQyxJQUFBLDhCQUZBTixTQUlBLFNBQUFlLEdBQ0FWLFFBQUF5QixNQUFBZixFQUFBUixLQUFBUyxRQUFBRCxFQUFBZ0IsY0NUQTdELElBQUE4RCxRQUFBLFdBQUEsUUFBQSxhQUFBLFNBQUFDLEVBQUFDLEdBQ0EsT0FDQXBCLFFBQUEsV0FDQSxNQUFBbUIsR0FBQUUsSUFBQSxXQUNBaEMsS0FBQSxTQUFBWSxHQUNBbUIsRUFBQUwsS0FBQWQsRUFBQVIsS0FDQUYsUUFBQUMsSUFBQSxTQUFBUyxFQUFBUixTQUdBNkIsV0FBQSxXQUNBLE1BQUFILEdBQUFFLElBQUEsWUFFQVAsY0FBQSxTQUFBUyxHQUNBLE1BQUFKLEdBQUFLLElBQUEsVUFBQUQsUUNiQW5FLElBQUE4RCxRQUFBLGFBQUEsUUFBQSxTQUFBQyxHQUVBLE9BQ0FWLElBQUEsU0FBQUQsR0FDQSxNQUFBVyxHQUFBTSxLQUFBLHNCQUFBakIsSUFFQWtCLElBQUEsV0FDQSxNQUFBUCxHQUFBRSxJQUFBIiwiZmlsZSI6InB1YmxpYy9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnTGlzdG9yJywgW1xuXHQndWkucm91dGVyJyxcblx0J3NhdGVsbGl6ZXInXG5dKTtcblxuYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkYXV0aFByb3ZpZGVyKXtcblx0Ly8gc2F0ZWxsaXplciBjb25maWdcblx0JGF1dGhQcm92aWRlci5nb29nbGUoe1xuICAgICAgY2xpZW50SWQ6ICc5MjUwODI0OTM3NjgtZTZmdGV0NWlzYnJyaHRnMnRyYTR2N2xocjIzdjY2MTkuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20nXG4gICAgfSk7XG5cbiAgICAvLyBkZWZpbmUgcm91dGVzXG5cdCRzdGF0ZVByb3ZpZGVyXG5cdFx0LnN0YXRlKCdob21lJywge1xuXHRcdFx0dXJsOiBcIi9cIixcblx0XHRcdHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9tYWluLmh0bWxcIixcblx0XHRcdGNvbnRyb2xsZXI6ICdNYWluQ3RybCdcblx0XHR9KVxuXHRcdC5zdGF0ZSgncmVnaXN0ZXInLCB7XG5cdFx0XHR1cmw6IFwiL3JlZ2lzdGVyXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvcmVnaXN0ZXIuaHRtbFwiLFxuXHRcdFx0Y29udHJvbGxlcjogJ0F1dGhDdHJsJyxcblx0XHRcdHJlc29sdmU6IHtcblx0ICAgICAgICAgIHNraXBJZkxvZ2dlZEluOiBza2lwSWZMb2dnZWRJblxuXHQgICAgICAgIH1cblx0XHR9KVxuXHRcdC5zdGF0ZSgnbG9naW4nLCB7XG5cdFx0XHR1cmw6IFwiL2xvZ2luXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvbG9naW4uaHRtbFwiLFxuXHRcdFx0Y29udHJvbGxlcjogJ0F1dGhDdHJsJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdsb2dvdXQnLCB7XG5cdFx0XHR1cmw6ICcvbG9nb3V0Jyxcblx0XHRcdHRlbXBsYXRlOiBudWxsLFxuXHRcdFx0Y29udHJvbGxlcjogJ0xvZ291dEN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3Byb2ZpbGUnLCB7XG5cdFx0XHR1cmw6ICcvcHJvZmlsZScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9wcm9maWxlLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsJyxcblx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0bG9naW5SZXF1aXJlZDogbG9naW5SZXF1aXJlZFxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xuXG5cdC8vIFJlc29sdmUgZnVuY3Rpb25zXG5cdGZ1bmN0aW9uIHNraXBJZkxvZ2dlZEluKCRxLCAkYXV0aCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICBpZiAoJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgZGZkLnJlamVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbG9naW5SZXF1aXJlZCgkcSwgJGxvY2F0aW9uLCAkYXV0aCkge1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgIGlmICgkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG59KTsiLCJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnTGlzdG9yJywgW1xuXHQndWkucm91dGVyJyxcblx0J3NhdGVsbGl6ZXInXG5dKTtcblxuYXBwLmNvbmZpZyhbXCIkc3RhdGVQcm92aWRlclwiLCBcIiR1cmxSb3V0ZXJQcm92aWRlclwiLCBcIiRhdXRoUHJvdmlkZXJcIiwgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGF1dGhQcm92aWRlcil7XG5cdC8vIHNhdGVsbGl6ZXIgY29uZmlnXG4gICAgc2tpcElmTG9nZ2VkSW4uJGluamVjdCA9IFtcIiRxXCIsIFwiJGF1dGhcIl07XG4gICAgbG9naW5SZXF1aXJlZC4kaW5qZWN0ID0gW1wiJHFcIiwgXCIkbG9jYXRpb25cIiwgXCIkYXV0aFwiXTtcblx0JGF1dGhQcm92aWRlci5nb29nbGUoe1xuICAgICAgY2xpZW50SWQ6ICc5MjUwODI0OTM3NjgtZTZmdGV0NWlzYnJyaHRnMnRyYTR2N2xocjIzdjY2MTkuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20nXG4gICAgfSk7XG5cbiAgICAvLyBkZWZpbmUgcm91dGVzXG5cdCRzdGF0ZVByb3ZpZGVyXG5cdFx0LnN0YXRlKCdob21lJywge1xuXHRcdFx0dXJsOiBcIi9cIixcblx0XHRcdHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9tYWluLmh0bWxcIixcblx0XHRcdGNvbnRyb2xsZXI6ICdNYWluQ3RybCdcblx0XHR9KVxuXHRcdC5zdGF0ZSgncmVnaXN0ZXInLCB7XG5cdFx0XHR1cmw6IFwiL3JlZ2lzdGVyXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvcmVnaXN0ZXIuaHRtbFwiLFxuXHRcdFx0Y29udHJvbGxlcjogJ0F1dGhDdHJsJyxcblx0XHRcdHJlc29sdmU6IHtcblx0ICAgICAgICAgIHNraXBJZkxvZ2dlZEluOiBza2lwSWZMb2dnZWRJblxuXHQgICAgICAgIH1cblx0XHR9KVxuXHRcdC5zdGF0ZSgnbG9naW4nLCB7XG5cdFx0XHR1cmw6IFwiL2xvZ2luXCIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvbG9naW4uaHRtbFwiLFxuXHRcdFx0Y29udHJvbGxlcjogJ0F1dGhDdHJsJ1xuXHRcdH0pXG5cdFx0LnN0YXRlKCdsb2dvdXQnLCB7XG5cdFx0XHR1cmw6ICcvbG9nb3V0Jyxcblx0XHRcdHRlbXBsYXRlOiBudWxsLFxuXHRcdFx0Y29udHJvbGxlcjogJ0xvZ291dEN0cmwnXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3Byb2ZpbGUnLCB7XG5cdFx0XHR1cmw6ICcvcHJvZmlsZScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9wcm9maWxlLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsJyxcblx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0bG9naW5SZXF1aXJlZDogbG9naW5SZXF1aXJlZFxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xuXG5cdC8vIFJlc29sdmUgZnVuY3Rpb25zXG5cdGZ1bmN0aW9uIHNraXBJZkxvZ2dlZEluKCRxLCAkYXV0aCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICBpZiAoJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgZGZkLnJlamVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbG9naW5SZXF1aXJlZCgkcSwgJGxvY2F0aW9uLCAkYXV0aCkge1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgIGlmICgkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdBdXRoQ3RybCcsIFtcIiRzY29wZVwiLCBcIiRhdXRoXCIsIFwiJGxvY2F0aW9uXCIsIFwiQWNjb3VudFwiLCBmdW5jdGlvbigkc2NvcGUsICRhdXRoLCAkbG9jYXRpb24sIEFjY291bnQpe1xuXG5cdC8vIEZvciBHb29nbGUgbG9naW5cblx0JHNjb3BlLmF1dGhlbnRpY2F0ZSA9IGZ1bmN0aW9uKHByb3ZpZGVyKSB7XG4gICAgICAkYXV0aC5hdXRoZW50aWNhdGUocHJvdmlkZXIpLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgIFx0Y29uc29sZS5sb2cocmVzLmRhdGEudG9rZW4pO1xuICAgICAgXHQkYXV0aC5zZXRUb2tlbihyZXMpO1xuICAgICAgfSk7XG4gICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgIH07XG5cblx0Ly8gcmVnaXN0ZXIgbmV3IHVzZXJcblx0JHNjb3BlLm5ld1VzZXIgPSB7fTtcblx0JHNjb3BlLmVycm9yTWVzc2FnZSA9IGZhbHNlO1xuXHQkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbigpe1xuXHRcdC8vIHNlbmQgc2lnbnVwIFBPU1QgcmVxdWVzdCB0byAvYXV0aC9zaWdudXBcblx0XHQkYXV0aC5zaWdudXAoJHNjb3BlLm5ld1VzZXIpXG5cdFx0XHQudGhlbihmdW5jdGlvbihyZXMpe1xuXHRcdFx0XHQvLyBzZXQgbG9jYWxzdG9yYWdlIHRva2VuXG5cdFx0XHRcdCRhdXRoLnNldFRva2VuKHJlcyk7XG5cdFx0XHRcdEFjY291bnQuc2V0VXNlcigpXG5cdFx0XHQgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHQgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0XHRcdCAgICAgICAgfSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHJlcyk7XG5cdFx0XHRcdCRzY29wZS5lcnJvck1lc3NhZ2UgPSByZXMuZGF0YS5tZXNzYWdlO1xuXHRcdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLmxvZ2luVXNlciA9IHt9O1xuXHQkc2NvcGUubG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICRhdXRoLmxvZ2luKCRzY29wZS5sb2dpblVzZXIpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBcdEFjY291bnQuc2V0VXNlcigpXG5cdFx0ICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdCAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuXHRcdCAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgXHRjb25zb2xlLmxvZyhyZXMpO1xuXHRcdFx0JHNjb3BlLmVycm9yTWVzc2FnZSA9IHJlcy5kYXRhLm1lc3NhZ2U7XG4gICAgICAgIH0pO1xuICAgIH07XG59XSk7XG5hcHAuY29udHJvbGxlcignTG9nb3V0Q3RybCcsIFtcIiRsb2NhdGlvblwiLCBcIiRhdXRoXCIsIGZ1bmN0aW9uKCRsb2NhdGlvbiwgJGF1dGgpIHtcblx0aWYgKCEkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSkgeyByZXR1cm47IH1cblxuXHQkYXV0aC5sb2dvdXQoKVxuXHQgIC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0ICB9KTtcbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ01haW5DdHJsJywgW1wiJHNjb3BlXCIsIFwiQ2FuZGlkYXRlXCIsIGZ1bmN0aW9uKCRzY29wZSwgQ2FuZGlkYXRlKXtcblx0JHNjb3BlLmFkZENhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSl7XG5cdFx0Y29uc29sZS5sb2coY2FuZGlkYXRlKTtcblx0XHRyZXR1cm4gQ2FuZGlkYXRlLmFkZChjYW5kaWRhdGUpLnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdGNvbnNvbGUubG9nKHJlcyk7XG5cdFx0XHQkc2NvcGUucmVzZXQoKTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHtcblx0XHQkc2NvcGUuYyA9IGFuZ3VsYXIuY29weSgkc2NvcGUubWFzdGVyKTtcblx0fTtcbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ05hdkN0cmwnLCBbXCIkc2NvcGVcIiwgXCIkYXV0aFwiLCBcIkFjY291bnRcIiwgZnVuY3Rpb24oJHNjb3BlLCAkYXV0aCwgQWNjb3VudCl7XG5cdEFjY291bnQuc2V0VXNlcigpO1xuXHRcblx0JHNjb3BlLmlzQXV0aGVudGljYXRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRhdXRoLmlzQXV0aGVudGljYXRlZCgpO1xuICAgIH07XG59XSlcblxuYXBwLmNvbnRyb2xsZXIoJ1Byb2ZpbGVDdHJsJywgW1wiJHNjb3BlXCIsIFwiJGF1dGhcIiwgXCJBY2NvdW50XCIsIGZ1bmN0aW9uKCRzY29wZSwgJGF1dGgsIEFjY291bnQpIHtcblxuICAgICRzY29wZS51cGRhdGVQcm9maWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICBBY2NvdW50LnVwZGF0ZVByb2ZpbGUoJHNjb3BlLnVzZXIpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdQcm9maWxlIGhhcyBiZWVuIHVwZGF0ZWQnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihyZXNwb25zZS5kYXRhLm1lc3NhZ2UsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XSk7XG5hcHAuZmFjdG9yeSgnQWNjb3VudCcsIFtcIiRodHRwXCIsIFwiJHJvb3RTY29wZVwiLCBmdW5jdGlvbigkaHR0cCwgJHJvb3RTY29wZSkge1xuXHRyZXR1cm4ge1xuXHRcdHNldFVzZXI6IGZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lJylcblx0XHQgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICBcdCRyb290U2NvcGUudXNlciA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0ICAgICAgICBcdGNvbnNvbGUubG9nKCdkYXRhOiAnLCByZXNwb25zZS5kYXRhKTtcblx0XHQgICAgICAgIH0pO1xuXHRcdH0sXG5cdFx0Z2V0UHJvZmlsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lJyk7XG5cdFx0fSxcblx0XHR1cGRhdGVQcm9maWxlOiBmdW5jdGlvbihwcm9maWxlRGF0YSkge1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZScsIHByb2ZpbGVEYXRhKTtcblx0XHR9XG5cdH07XG59XSk7XG5hcHAuZmFjdG9yeSgnQ2FuZGlkYXRlJywgW1wiJGh0dHBcIiwgZnVuY3Rpb24oJGh0dHApIHtcblxuXHRyZXR1cm4ge1xuXHRcdGFkZDogZnVuY3Rpb24oY2FuZGlkYXRlKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NhbmRpZGF0ZXMvYWRkJywgY2FuZGlkYXRlKTtcblx0XHR9LFxuXHRcdGFsbDogZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FuZGlkYXRlcycpO1xuXHRcdH1cblx0fTtcbn1dKTtcbiIsIlxuYXBwLmNvbnRyb2xsZXIoJ0F1dGhDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkYXV0aCwgJGxvY2F0aW9uLCBBY2NvdW50KXtcblxuXHQvLyBGb3IgR29vZ2xlIGxvZ2luXG5cdCRzY29wZS5hdXRoZW50aWNhdGUgPSBmdW5jdGlvbihwcm92aWRlcikge1xuICAgICAgJGF1dGguYXV0aGVudGljYXRlKHByb3ZpZGVyKS50aGVuKGZ1bmN0aW9uKHJlcyl7XG4gICAgICBcdGNvbnNvbGUubG9nKHJlcy5kYXRhLnRva2VuKTtcbiAgICAgIFx0JGF1dGguc2V0VG9rZW4ocmVzKTtcbiAgICAgIH0pO1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICB9O1xuXG5cdC8vIHJlZ2lzdGVyIG5ldyB1c2VyXG5cdCRzY29wZS5uZXdVc2VyID0ge307XG5cdCRzY29wZS5lcnJvck1lc3NhZ2UgPSBmYWxzZTtcblx0JHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24oKXtcblx0XHQvLyBzZW5kIHNpZ251cCBQT1NUIHJlcXVlc3QgdG8gL2F1dGgvc2lnbnVwXG5cdFx0JGF1dGguc2lnbnVwKCRzY29wZS5uZXdVc2VyKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0Ly8gc2V0IGxvY2Fsc3RvcmFnZSB0b2tlblxuXHRcdFx0XHQkYXV0aC5zZXRUb2tlbihyZXMpO1xuXHRcdFx0XHRBY2NvdW50LnNldFVzZXIoKVxuXHRcdFx0ICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0ICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdFx0XHQgICAgICAgIH0pO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihyZXMpe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXMpO1xuXHRcdFx0XHQkc2NvcGUuZXJyb3JNZXNzYWdlID0gcmVzLmRhdGEubWVzc2FnZTtcblx0XHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5sb2dpblVzZXIgPSB7fTtcblx0JHNjb3BlLmxvZ2luID0gZnVuY3Rpb24oKSB7XG4gICAgICAkYXV0aC5sb2dpbigkc2NvcGUubG9naW5Vc2VyKVxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgXHRBY2NvdW50LnNldFVzZXIoKVxuXHRcdCAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHQgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0XHQgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIFx0Y29uc29sZS5sb2cocmVzKTtcblx0XHRcdCRzY29wZS5lcnJvck1lc3NhZ2UgPSByZXMuZGF0YS5tZXNzYWdlO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7IiwiYXBwLmNvbnRyb2xsZXIoJ0xvZ291dEN0cmwnLCBmdW5jdGlvbigkbG9jYXRpb24sICRhdXRoKSB7XG5cdGlmICghJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHsgcmV0dXJuOyB9XG5cblx0JGF1dGgubG9nb3V0KClcblx0ICAudGhlbihmdW5jdGlvbigpIHtcblx0ICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdCAgfSk7XG59KTsiLCJcbmFwcC5jb250cm9sbGVyKCdNYWluQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgQ2FuZGlkYXRlKXtcblx0JHNjb3BlLmFkZENhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSl7XG5cdFx0Y29uc29sZS5sb2coY2FuZGlkYXRlKTtcblx0XHRyZXR1cm4gQ2FuZGlkYXRlLmFkZChjYW5kaWRhdGUpLnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdGNvbnNvbGUubG9nKHJlcyk7XG5cdFx0XHQkc2NvcGUucmVzZXQoKTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHtcblx0XHQkc2NvcGUuYyA9IGFuZ3VsYXIuY29weSgkc2NvcGUubWFzdGVyKTtcblx0fTtcbn0pOyIsIlxuYXBwLmNvbnRyb2xsZXIoJ05hdkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRhdXRoLCBBY2NvdW50KXtcblx0QWNjb3VudC5zZXRVc2VyKCk7XG5cdFxuXHQkc2NvcGUuaXNBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJGF1dGguaXNBdXRoZW50aWNhdGVkKCk7XG4gICAgfTtcbn0pIiwiXG5hcHAuY29udHJvbGxlcignUHJvZmlsZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRhdXRoLCBBY2NvdW50KSB7XG5cbiAgICAkc2NvcGUudXBkYXRlUHJvZmlsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgQWNjb3VudC51cGRhdGVQcm9maWxlKCRzY29wZS51c2VyKVxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUHJvZmlsZSBoYXMgYmVlbiB1cGRhdGVkJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7IiwiYXBwLmZhY3RvcnkoJ0FjY291bnQnLCBmdW5jdGlvbigkaHR0cCwgJHJvb3RTY29wZSkge1xuXHRyZXR1cm4ge1xuXHRcdHNldFVzZXI6IGZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lJylcblx0XHQgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0ICAgICAgICBcdCRyb290U2NvcGUudXNlciA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0ICAgICAgICBcdGNvbnNvbGUubG9nKCdkYXRhOiAnLCByZXNwb25zZS5kYXRhKTtcblx0XHQgICAgICAgIH0pO1xuXHRcdH0sXG5cdFx0Z2V0UHJvZmlsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lJyk7XG5cdFx0fSxcblx0XHR1cGRhdGVQcm9maWxlOiBmdW5jdGlvbihwcm9maWxlRGF0YSkge1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZScsIHByb2ZpbGVEYXRhKTtcblx0XHR9XG5cdH07XG59KTsiLCJhcHAuZmFjdG9yeSgnQ2FuZGlkYXRlJywgZnVuY3Rpb24oJGh0dHApIHtcblxuXHRyZXR1cm4ge1xuXHRcdGFkZDogZnVuY3Rpb24oY2FuZGlkYXRlKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NhbmRpZGF0ZXMvYWRkJywgY2FuZGlkYXRlKTtcblx0XHR9LFxuXHRcdGFsbDogZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FuZGlkYXRlcycpO1xuXHRcdH1cblx0fTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
